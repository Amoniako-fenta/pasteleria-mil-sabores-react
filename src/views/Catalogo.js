import React, { useState, useMemo } from 'react';
import { products } from '../data/products'; // Importa los datos
import ProductCard from '../components/ProductCard'; // Importa el componente de tarjeta

// Define las categor칤as para los botones de filtro
const categories = [
  { id: 'all', name: 'Todo' },
  { id: 'tortas-cuadradas', name: 'Tortas Cuadradas' },
  { id: 'tortas-circulares', name: 'Tortas Circulares' },
  { id: 'postres-individuales', name: 'Postres Individuales' },
  { id: 'sin-azucar', name: 'Sin Az칰car' },
  { id: 'pasteleria-tradicional', name: 'Pasteler칤a Tradicional' },
  { id: 'sin-gluten', name: 'Sin Gluten' },
  { id: 'vegana', name: 'Vegana' },
  { id: 'tortas-especiales', name: 'Tortas Especiales' }
];

function Catalogo() {
  // 1. ESTADO: Guarda la categor칤a activa. Por defecto, 'all'.
  const [activeFilter, setActiveFilter] = useState('all');

  // 2. L칍GICA DE FILTRADO (La "Magia" de React)
  // useMemo optimiza para que el filtrado solo se ejecute cuando cambie el filtro.
  const filteredProducts = useMemo(() => {
    if (activeFilter === 'all') {
      return products; // Si el filtro es 'all', devuelve todos los productos
    }
    // Si no, devuelve solo los productos que coinciden con la categor칤a
    return products.filter(product => product.category === activeFilter);
  }, [activeFilter]); // Se vuelve a ejecutar solo si 'activeFilter' cambia

  return (
    <>
      <header className="page-header">
        <h1>Cat치logo de Productos</h1>
        <p>Selecciona una categor칤a para ver los productos disponibles.</p>
        <div className="filters">
          {/* Mapea las categor칤as para crear los botones de filtro din치micamente */}
          {categories.map(category => (
            <button
              key={category.id}
              // Cambia la clase a 'active' si coincide con el estado
              className={`chip ${activeFilter === category.id ? 'active' : ''}`}
              // Al hacer clic, actualiza el estado del filtro
              onClick={() => setActiveFilter(category.id)}
            >
              {category.name}
            </button>
          ))}
        </div>
      </header>

      <section className="grid productos">
        {/* Mapea sobre la lista de productos YA FILTRADA y renderiza una tarjeta para cada uno */}
        {filteredProducts.map(product => (
          <ProductCard key={product.id} product={product} />
        ))}
      </section>
      
      {/* La secci칩n de info extra puede ir aqu칤 o en otro componente */}
      <section className="info-extra">
          <h3>Origen de productos</h3>
          <p>
            Nuestras recetas tradicionales provienen de generaciones de reposteros artesanales,
            manteniendo el sabor y la autenticidad de la pasteler칤a cl치sica.
          </p>
          <h3>Recomendaciones personalizadas</h3>
          <p>
            Explora nuestro cat치logo y te daremos sugerencias seg칰n lo que m치s te guste. 游꼻
          </p>
          <h3>Impacto Comunitario</h3>
          <p>
            Con cada compra apoyas a los estudiantes de la 
            <strong>Escuela de Administraci칩n y Negocios</strong>, quienes participan en la elaboraci칩n
            y perfeccionamiento de nuestras recetas.
          </p>
      </section>
    </>
  );
}

export default Catalogo;


